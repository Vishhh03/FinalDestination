import{a as $}from"./chunk-D7QZAHZP.js";import{a as ee}from"./chunk-VIBJFSOI.js";import{a as G,b as P,c as F,d as q,e as L,f as j,g as U,h as Y,i as z,j as J,l as K,m as Q,p as X}from"./chunk-GR3ZKYWY.js";import{a as Z}from"./chunk-EQVOZHBO.js";import{$ as k,G as g,H as f,I as V,J as H,K as _,L as e,M as i,N as d,O as b,P as D,Q as c,T as a,U as x,V as h,W as w,X as C,Y as S,aa as y,ga as N,ha as T,i as E,ia as W,l as M,la as B,m as v,n as u,o as p,oa as R,qa as O,ta as A,u as o,z as I}from"./chunk-M2QECLH7.js";var te=(()=>{let s=class s{constructor(l){this.http=l,this.apiUrl="/api/reviews"}getHotelReviews(l){return this.http.get(`${this.apiUrl}/hotel/${l}`)}submit(l){return this.http.post(this.apiUrl,l)}};s.\u0275fac=function(t){return new(t||s)(M(B))},s.\u0275prov=E({token:s,factory:s.\u0275fac,providedIn:"root"});let r=s;return r})();var ne=(r,s)=>s.id;function oe(r,s){if(r&1&&(e(0,"div",2),d(1,"i",5),a(2),i()),r&2){let n=c();o(2),h(" ",n.error," ")}}function ae(r,s){if(r&1&&(e(0,"div",3),d(1,"i",6),a(2),i()),r&2){let n=c();o(2),h(" ",n.success," ")}}function re(r,s){if(r&1){let n=b();e(0,"div",31)(1,"h3"),a(2,"Write a Review"),i(),e(3,"form",35),D("ngSubmit",function(){u(n);let t=c(2);return p(t.submitReview())}),e(4,"div",25)(5,"label"),a(6,"Rating"),i(),e(7,"select",36),S("ngModelChange",function(t){u(n);let m=c(2);return C(m.reviewData.rating,t)||(m.reviewData.rating=t),p(t)}),e(8,"option",37),a(9,"5 - Excellent"),i(),e(10,"option",37),a(11,"4 - Very Good"),i(),e(12,"option",37),a(13,"3 - Good"),i(),e(14,"option",37),a(15,"2 - Fair"),i(),e(16,"option",37),a(17,"1 - Poor"),i()()(),e(18,"div",25)(19,"label"),a(20,"Comment"),i(),e(21,"textarea",38),S("ngModelChange",function(t){u(n);let m=c(2);return C(m.reviewData.comment,t)||(m.reviewData.comment=t),p(t)}),i()(),e(22,"button",39),a(23,"Submit Review"),i()()()}if(r&2){let n=c(2);o(7),w("ngModel",n.reviewData.rating),o(),_("value",5),o(2),_("value",4),o(2),_("value",3),o(2),_("value",2),o(2),_("value",1),o(5),w("ngModel",n.reviewData.comment)}}function le(r,s){if(r&1&&(e(0,"div",33)(1,"div",40)(2,"div",41),d(3,"i",42),e(4,"span",43),a(5),i()(),e(6,"div",44),d(7,"i",14),a(8),i()(),e(9,"p",45),a(10),i(),e(11,"p",46),a(12),k(13,"date"),i()()),r&2){let n=s.$implicit;o(5),x(n.userName),o(3),h(" ",n.rating," "),o(2),x(n.comment),o(2),x(y(13,4,n.createdAt,"medium"))}}function se(r,s){r&1&&(e(0,"div",34),d(1,"i",47),e(2,"p"),a(3,"No reviews yet. Be the first to review!"),i()())}function me(r,s){if(r&1){let n=b();e(0,"div",4)(1,"div",7)(2,"div",8)(3,"div",9),d(4,"i",10),i()(),e(5,"div",11)(6,"h1"),a(7),i(),e(8,"div",12)(9,"span",13),d(10,"i",14),a(11),k(12,"number"),i(),e(13,"span",15),d(14,"i",16),a(15),i()(),e(16,"p",17),a(17),i(),e(18,"div",18)(19,"div",19),d(20,"i",20),e(21,"span"),a(22),i()(),e(23,"div",19),d(24,"i",21),e(25,"span"),a(26),i()()()()(),e(27,"div",22)(28,"h2"),a(29,"Book Your Stay"),i(),e(30,"form",23),D("ngSubmit",function(){u(n);let t=c();return p(t.bookHotel())}),e(31,"div",24)(32,"div",25)(33,"label"),a(34,"Check-in Date"),i(),e(35,"input",26),S("ngModelChange",function(t){u(n);let m=c();return C(m.bookingData.checkInDate,t)||(m.bookingData.checkInDate=t),p(t)}),i()(),e(36,"div",25)(37,"label"),a(38,"Check-out Date"),i(),e(39,"input",27),S("ngModelChange",function(t){u(n);let m=c();return C(m.bookingData.checkOutDate,t)||(m.bookingData.checkOutDate=t),p(t)}),i()()(),e(40,"div",25)(41,"label"),a(42,"Number of Guests"),i(),e(43,"input",28),S("ngModelChange",function(t){u(n);let m=c();return C(m.bookingData.numberOfGuests,t)||(m.bookingData.numberOfGuests=t),p(t)}),i()(),e(44,"button",29),a(45,"Book Now"),i()()(),e(46,"div",30)(47,"h2"),a(48,"Guest Reviews"),i(),g(49,re,24,7,"div",31),e(50,"div",32),V(51,le,14,7,"div",33,ne),g(53,se,4,0,"div",34),i()()()}if(r&2){let n=c();o(7),x(n.hotel.name),o(4),h(" ",y(12,11,n.hotel.rating,"1.1-1")," "),o(4),h(" ",n.hotel.city," "),o(2),x(n.hotel.address),o(5),h("",n.hotel.availableRooms," Rooms Available"),o(4),h("\\$",n.hotel.pricePerNight," per night"),o(9),w("ngModel",n.bookingData.checkInDate),o(4),w("ngModel",n.bookingData.checkOutDate),o(4),w("ngModel",n.bookingData.numberOfGuests),o(6),f(n.authService.isAuthenticated()?49:-1),o(2),H(n.reviews),o(2),f(n.reviews.length===0?53:-1)}}var De=(()=>{let s=class s{constructor(){this.hotelService=v($),this.bookingService=v(ee),this.reviewService=v(te),this.authService=v(A),this.route=v(R),this.router=v(O),this.hotel=null,this.reviews=[],this.bookingData={hotelId:0,checkInDate:"",checkOutDate:"",numberOfGuests:1,guestName:"",guestEmail:""},this.reviewData={hotelId:0,rating:5,comment:""},this.error="",this.success=""}ngOnInit(){let l=+this.route.snapshot.params.id;this.hotelService.getById(l).subscribe({next:t=>{this.hotel=t,this.bookingData.hotelId=t.id,this.reviewData.hotelId=t.id},error:()=>this.error="Hotel not found"}),this.reviewService.getHotelReviews(l).subscribe(t=>this.reviews=t)}bookHotel(){if(!this.authService.isAuthenticated()){this.router.navigate(["/login"]);return}let l=this.authService.currentUser();this.bookingData.guestName=l?.name||"",this.bookingData.guestEmail=l?.email||"",this.bookingService.create(this.bookingData).subscribe({next:()=>{this.success="Booking created successfully!",setTimeout(()=>this.router.navigate(["/bookings"]),1500)},error:t=>this.error=t.error?.message||"Booking failed"})}submitReview(){if(!this.authService.isAuthenticated()){this.router.navigate(["/login"]);return}this.reviewService.submit(this.reviewData).subscribe({next:l=>{this.reviews.unshift(l),this.reviewData={hotelId:this.hotel.id,rating:5,comment:""},this.success="Review submitted successfully!"},error:l=>this.error=l.error?.message||"Failed to submit review"})}};s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=I({type:s,selectors:[["app-hotel-detail"]],decls:6,vars:3,consts:[[1,"hotel-detail-container"],[1,"container"],[1,"alert","alert-error"],[1,"alert","alert-success"],[1,"hotel-detail"],[1,"fas","fa-exclamation-circle"],[1,"fas","fa-check-circle"],[1,"hotel-detail-header"],[1,"hotel-detail-image"],[1,"placeholder-image-large"],[1,"fas","fa-hotel"],[1,"hotel-detail-info"],[1,"hotel-meta"],[1,"rating"],[1,"fas","fa-star"],[1,"location"],[1,"fas","fa-map-marker-alt"],[1,"address"],[1,"hotel-stats"],[1,"stat"],[1,"fas","fa-door-open"],[1,"fas","fa-dollar-sign"],[1,"booking-section"],[1,"booking-form",3,"ngSubmit"],[1,"form-row"],[1,"form-group"],["type","date","name","checkIn","required","",3,"ngModelChange","ngModel"],["type","date","name","checkOut","required","",3,"ngModelChange","ngModel"],["type","number","name","guests","min","1","required","",3,"ngModelChange","ngModel"],["type","submit",1,"btn-book"],[1,"reviews-section"],[1,"review-form"],[1,"reviews-list"],[1,"review-card"],[1,"no-reviews"],[3,"ngSubmit"],["name","rating","required","",3,"ngModelChange","ngModel"],[3,"value"],["name","comment","rows","4","placeholder","Share your experience...",3,"ngModelChange","ngModel"],["type","submit",1,"btn-submit"],[1,"review-header"],[1,"reviewer-info"],[1,"fas","fa-user-circle"],[1,"reviewer-name"],[1,"review-rating"],[1,"review-comment"],[1,"review-date"],[1,"fas","fa-comments"]],template:function(t,m){t&1&&(d(0,"app-navbar"),e(1,"div",0)(2,"div",1),g(3,oe,3,1,"div",2),g(4,ae,3,1,"div",3),g(5,me,54,14,"div",4),i()()),t&2&&(o(3),f(m.error?3:-1),o(),f(m.success?4:-1),o(),f(m.hotel?5:-1))},dependencies:[W,X,j,z,J,G,U,Y,P,F,Q,K,L,q,Z,T,N],encapsulation:2});let r=s;return r})();export{De as HotelDetailComponent};
