import{a as R}from"./chunk-VIBJFSOI.js";import{a as T,b as W,c as Y,d as I,e as F,f as L,g as q,k as A,l as H,m as G,o as O,p as j}from"./chunk-GR3ZKYWY.js";import{a as J}from"./chunk-EQVOZHBO.js";import{$ as v,G as _,H as x,I as w,J as B,K as E,L as e,M as i,N as c,O as f,P as y,Q as d,S as V,T as a,U as D,V as g,W as C,X as h,Y as k,aa as b,ga as P,ia as N,m as M,n as p,o as u,u as r,z as S}from"./chunk-M2QECLH7.js";var U=(l,m)=>m.id;function z(l,m){if(l&1&&(e(0,"div",3),c(1,"i",9),a(2),i()),l&2){let n=d();r(2),g(" ",n.error," ")}}function K(l,m){if(l&1&&(e(0,"div",4),c(1,"i",10),a(2),i()),l&2){let n=d();r(2),g(" ",n.success," ")}}function Q(l,m){if(l&1){let n=f();e(0,"button",20),y("click",function(){p(n);let t=d().$implicit,o=d();return u(o.openPaymentModal(t))}),c(1,"i",21),a(2," Pay Now "),i(),e(3,"button",22),y("click",function(){p(n);let t=d().$implicit,o=d();return u(o.cancelBooking(t.id))}),c(4,"i",23),a(5," Cancel "),i()}}function X(l,m){if(l&1&&(e(0,"div",6)(1,"div",11)(2,"h3"),a(3),i(),e(4,"span",12),a(5),i()(),e(6,"div",13)(7,"div",14),c(8,"i",15),e(9,"span"),a(10),v(11,"date"),i()(),e(12,"div",14),c(13,"i",16),e(14,"span"),a(15),v(16,"date"),i()(),e(17,"div",14),c(18,"i",17),e(19,"span"),a(20),i()(),e(21,"div",14),c(22,"i",18),e(23,"span"),a(24),i()()(),e(25,"div",19),_(26,Q,6,0),i()()),l&2){let n=m.$implicit;r(3),D(n.hotelName),r(),V("status-"+n.status.toLowerCase()),r(),g(" ",n.status," "),r(5),g("Check-in: ",b(11,9,n.checkInDate,"mediumDate")),r(5),g("Check-out: ",b(16,12,n.checkOutDate,"mediumDate")),r(5),g("Guests: ",n.numberOfGuests),r(4),g("Total: \\$",n.totalAmount),r(2),x(n.status==="Confirmed"?26:-1)}}function Z(l,m){l&1&&(e(0,"div",7),c(1,"i",24),e(2,"p"),a(3,"You don't have any bookings yet"),i(),e(4,"a",25),a(5,"Browse Hotels"),i()())}function $(l,m){if(l&1){let n=f();e(0,"div",8)(1,"div",26),y("click",function(){p(n);let t=d();return u(t.closePaymentModal())}),i(),e(2,"div",27)(3,"div",28)(4,"h2"),a(5,"Payment Details"),i(),e(6,"button",29),y("click",function(){p(n);let t=d();return u(t.closePaymentModal())}),c(7,"i",23),i()(),e(8,"form",30),y("ngSubmit",function(){p(n);let t=d();return u(t.processPayment())}),e(9,"div",31)(10,"label"),a(11,"Amount"),i(),c(12,"input",32),i(),e(13,"div",31)(14,"label"),a(15,"Card Number"),i(),e(16,"input",33),k("ngModelChange",function(t){p(n);let o=d();return h(o.paymentData.cardNumber,t)||(o.paymentData.cardNumber=t),u(t)}),i()(),e(17,"div",34)(18,"div",31)(19,"label"),a(20,"Expiry Month"),i(),e(21,"input",35),k("ngModelChange",function(t){p(n);let o=d();return h(o.paymentData.expiryMonth,t)||(o.paymentData.expiryMonth=t),u(t)}),i()(),e(22,"div",31)(23,"label"),a(24,"Expiry Year"),i(),e(25,"input",36),k("ngModelChange",function(t){p(n);let o=d();return h(o.paymentData.expiryYear,t)||(o.paymentData.expiryYear=t),u(t)}),i()(),e(26,"div",31)(27,"label"),a(28,"CVV"),i(),e(29,"input",37),k("ngModelChange",function(t){p(n);let o=d();return h(o.paymentData.cvv,t)||(o.paymentData.cvv=t),u(t)}),i()()(),e(30,"div",31)(31,"label"),a(32,"Cardholder Name"),i(),e(33,"input",38),k("ngModelChange",function(t){p(n);let o=d();return h(o.paymentData.cardHolderName,t)||(o.paymentData.cardHolderName=t),u(t)}),i()(),e(34,"button",39),a(35,"Process Payment"),i()()()()}if(l&2){let n=d();r(12),E("value",n.paymentData.amount),r(4),C("ngModel",n.paymentData.cardNumber),r(5),C("ngModel",n.paymentData.expiryMonth),r(4),C("ngModel",n.paymentData.expiryYear),r(4),C("ngModel",n.paymentData.cvv),r(4),C("ngModel",n.paymentData.cardHolderName)}}var de=(()=>{let m=class m{constructor(){this.bookingService=M(R),this.bookings=[],this.selectedBooking=null,this.showPaymentModal=!1,this.paymentData={amount:0,currency:"USD",paymentMethod:"CreditCard",cardNumber:"",expiryMonth:0,expiryYear:0,cvv:"",cardHolderName:""},this.error="",this.success=""}ngOnInit(){this.loadBookings()}loadBookings(){this.bookingService.getMyBookings().subscribe(s=>this.bookings=s)}cancelBooking(s){confirm("Are you sure you want to cancel this booking?")&&this.bookingService.cancel(s).subscribe({next:()=>{this.success="Booking cancelled successfully",this.loadBookings()},error:t=>this.error=t.error?.message||"Failed to cancel booking"})}openPaymentModal(s){this.selectedBooking=s,this.paymentData.amount=s.totalAmount,this.showPaymentModal=!0}closePaymentModal(){this.showPaymentModal=!1,this.selectedBooking=null}processPayment(){this.selectedBooking&&this.bookingService.processPayment(this.selectedBooking.id,this.paymentData).subscribe({next:()=>{this.success="Payment processed successfully!",this.closePaymentModal(),this.loadBookings()},error:s=>this.error=s.error?.errorMessage||"Payment failed"})}};m.\u0275fac=function(t){return new(t||m)},m.\u0275cmp=S({type:m,selectors:[["app-bookings"]],decls:16,vars:4,consts:[[1,"page-header"],[1,"container"],[1,"bookings-section"],[1,"alert","alert-error"],[1,"alert","alert-success"],[1,"bookings-list"],[1,"booking-card"],[1,"no-bookings"],[1,"modal"],[1,"fas","fa-exclamation-circle"],[1,"fas","fa-check-circle"],[1,"booking-header"],[1,"booking-status"],[1,"booking-details"],[1,"detail-item"],[1,"fas","fa-calendar-check"],[1,"fas","fa-calendar-times"],[1,"fas","fa-users"],[1,"fas","fa-dollar-sign"],[1,"booking-actions"],[1,"btn-pay",3,"click"],[1,"fas","fa-credit-card"],[1,"btn-cancel",3,"click"],[1,"fas","fa-times"],[1,"fas","fa-calendar-alt"],["routerLink","/hotels",1,"btn-primary"],[1,"modal-overlay",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-close",3,"click"],[1,"payment-form",3,"ngSubmit"],[1,"form-group"],["type","text","readonly","",3,"value"],["type","text","name","cardNumber","placeholder","1234 5678 9012 3456","required","",3,"ngModelChange","ngModel"],[1,"form-row"],["type","number","name","expiryMonth","placeholder","MM","min","1","max","12","required","",3,"ngModelChange","ngModel"],["type","number","name","expiryYear","placeholder","YYYY","min","2024","required","",3,"ngModelChange","ngModel"],["type","text","name","cvv","placeholder","123","maxlength","4","required","",3,"ngModelChange","ngModel"],["type","text","name","cardHolderName","placeholder","John Doe","required","",3,"ngModelChange","ngModel"],["type","submit",1,"btn-submit"]],template:function(t,o){t&1&&(c(0,"app-navbar"),e(1,"div",0)(2,"div",1)(3,"h1"),a(4,"My Bookings"),i(),e(5,"p"),a(6,"Manage your hotel reservations"),i()()(),e(7,"section",2)(8,"div",1),_(9,z,3,1,"div",3),_(10,K,3,1,"div",4),e(11,"div",5),w(12,X,27,15,"div",6,U),i(),_(14,Z,6,0,"div",7),i()(),_(15,$,36,6,"div",8)),t&2&&(r(9),x(o.error?9:-1),r(),x(o.success?10:-1),r(2),B(o.bookings),r(2),x(o.bookings.length===0?14:-1),r(),x(o.showPaymentModal?15:-1))},dependencies:[N,j,L,T,q,W,Y,G,O,H,A,F,I,J,P],encapsulation:2});let l=m;return l})();export{de as BookingsComponent};
